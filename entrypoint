#!/bin/bash

# *****************************************************************************
# COPY THIS FILE TO THE ROOT OF YOUR PROJECT WITH ANY NAME OF YOUR CHOOSING
#
# EDIT ENV VARS DEFINED BELOW AS NEEDED (ONLY IF YOU DO NOT USE DEFAULT PATHS)
# *****************************************************************************

# Infrastructure orchestration entry point
# Delegates to npm script `dx` for actual logic

# Update path if DX is not mounted on ./dx
DX_DIR="$(dirname "$0")/dx"

# Optional: Customize services and modules directories
# Set these to use directories different from ./services and ./modules
# Uncomment and update as needed:
# export DX_SERVICES_DIR="$(dirname "$0")/services"
# export DX_MODULES_DIR="$(dirname "$0")/modules"

cd "$DX_DIR" || exit 1

# Set executor name for logger to use in help/output
export DX_EXECUTOR="$(basename "$0")"

# Route all commands through dx entry point
# exec replaces this shell so signals (Ctrl+C) propagate directly to docker compose
exec pnpm run dx "${@}"
